{"ast":null,"code":"import axios from 'axios';\nimport jwt from 'jsonwebtoken';\nconst SECRET_KEY_TOKEN = 'React-js2105'; // key nay ben back end quy dinh\n// ho se cung cap ben phia frontend\n// key nay can phai bao mat\n\nconst GetdataSearchMovies = async (keyword, page = 1) => {\n  const url = `https://api.themoviedb.org/3/search/movie?query=${keyword}&api_key=cfe422613b250f702980a3bbf9e90716&page=${page}`;\n  const response = await axios.get(url);\n  const result = response.status === 200 ? response.data : {};\n  return result;\n};\n\n_c = GetdataSearchMovies;\n\nconst getdataByIdMovies = async (id = 1) => {\n  const url = `https://api.themoviedb.org/3/movie/${id}?api_key=0aecc06bb4fadb06b5f071fef0c2ce6d&language=en-US&append_to_response=videos,images&include_image_language=en,null`;\n  const response = await axios.get(url);\n  const result = response.status === 200 ? response.data : {};\n  return result;\n};\n\nconst CheckLoginUser = (user, pass) => {\n  // khi ma user gui username va password len server(backend api)\n  // backend api se kiem tra xem account co ton tai khong\n  // backend se tra ve thong tin cua user do duoi dang ma hoa token\n  // client front-end se nhan duoc token do - giai ma ra de de duoc cac thong tin nguoi dung\n  // giua backend va frontend can co de ma hoa va giai ma chung\n  // su dung demo test web token\n  let token = null;\n\n  if (user === 'admin' && pass == '123') {\n    token = jwt.sign({\n      id: 1,\n      user: user,\n      fullname: 'Nguyen Xuan Phat',\n      email: 'phatnx2000@gmail.com',\n      phone: '0937001189',\n      address: 'Nguyen Van Linh'\n    }, SECRET_KEY_TOKEN);\n  }\n\n  return token;\n};\n\n_c2 = CheckLoginUser;\n\nfunction getTokenStorage() {\n  let token = window.localStorage.get('token_login');\n  return token;\n}\n\nfunction decryptToken() {\n  let encrypToken = getTokenStorage();\n  let decoded = jwt.verify(encrypToken, SECRET_KEY_TOKEN);\n  return decoded;\n}\n\nfunction getEmailUser() {\n  const infoUser = decryptToken();\n\n  if (infoUser.hasOwnProperty('email')) {\n    return infoUser.email;\n  } else return null;\n}\n\nexport const api = {\n  GetdataSearchMovies,\n  getdataByIdMovies,\n  CheckLoginUser,\n  getEmailUser\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"GetdataSearchMovies\");\n$RefreshReg$(_c2, \"CheckLoginUser\");","map":{"version":3,"sources":["D:/ReactJS/reactjsstart/my-app/src/movies/services/api.js"],"names":["axios","jwt","SECRET_KEY_TOKEN","GetdataSearchMovies","keyword","page","url","response","get","result","status","data","getdataByIdMovies","id","CheckLoginUser","user","pass","token","sign","fullname","email","phone","address","getTokenStorage","window","localStorage","decryptToken","encrypToken","decoded","verify","getEmailUser","infoUser","hasOwnProperty","api"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AAEA,MAAMC,gBAAgB,GAAG,cAAzB,C,CACA;AACA;AACA;;AACA,MAAMC,mBAAmB,GAAG,OAAOC,OAAP,EAAgBC,IAAI,GAAG,CAAvB,KAA6B;AACxD,QAAMC,GAAG,GAAI,mDAAkDF,OAAQ,kDAAiDC,IAAK,EAA7H;AACA,QAAME,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAUF,GAAV,CAAvB;AACA,QAAMG,MAAM,GAAGF,QAAQ,CAACG,MAAT,KAAoB,GAApB,GAA0BH,QAAQ,CAACI,IAAnC,GAA0C,EAAzD;AACA,SAAOF,MAAP;AACA,CALD;;KAAMN,mB;;AAMN,MAAMS,iBAAiB,GAAG,OAAOC,EAAE,GAAG,CAAZ,KAAkB;AAC3C,QAAMP,GAAG,GAAI,sCAAqCO,EAAG,0HAArD;AACA,QAAMN,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAUF,GAAV,CAAvB;AACA,QAAMG,MAAM,GAAGF,QAAQ,CAACG,MAAT,KAAoB,GAApB,GAA0BH,QAAQ,CAACI,IAAnC,GAA0C,EAAzD;AACA,SAAOF,MAAP;AACA,CALD;;AAMA,MAAMK,cAAc,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,MAAIC,KAAK,GAAG,IAAZ;;AACA,MAAIF,IAAI,KAAK,OAAT,IAAoBC,IAAI,IAAI,KAAhC,EAAuC;AACtCC,IAAAA,KAAK,GAAGhB,GAAG,CAACiB,IAAJ,CACP;AACCL,MAAAA,EAAE,EAAE,CADL;AAECE,MAAAA,IAAI,EAAEA,IAFP;AAGCI,MAAAA,QAAQ,EAAE,kBAHX;AAICC,MAAAA,KAAK,EAAE,sBAJR;AAKCC,MAAAA,KAAK,EAAE,YALR;AAMCC,MAAAA,OAAO,EAAE;AANV,KADO,EASPpB,gBATO,CAAR;AAWA;;AACD,SAAOe,KAAP;AACA,CAtBD;;MAAMH,c;;AAwBN,SAASS,eAAT,GAA2B;AAC1B,MAAIN,KAAK,GAAGO,MAAM,CAACC,YAAP,CAAoBjB,GAApB,CAAwB,aAAxB,CAAZ;AACA,SAAOS,KAAP;AACA;;AACD,SAASS,YAAT,GAAwB;AACvB,MAAIC,WAAW,GAAGJ,eAAe,EAAjC;AACA,MAAIK,OAAO,GAAG3B,GAAG,CAAC4B,MAAJ,CAAWF,WAAX,EAAwBzB,gBAAxB,CAAd;AACA,SAAO0B,OAAP;AACA;;AACD,SAASE,YAAT,GAAwB;AACvB,QAAMC,QAAQ,GAAGL,YAAY,EAA7B;;AACA,MAAIK,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAJ,EAAsC;AACrC,WAAOD,QAAQ,CAACX,KAAhB;AACA,GAFD,MAEO,OAAO,IAAP;AACP;;AACD,OAAO,MAAMa,GAAG,GAAG;AAClB9B,EAAAA,mBADkB;AAElBS,EAAAA,iBAFkB;AAGlBE,EAAAA,cAHkB;AAIlBgB,EAAAA;AAJkB,CAAZ","sourcesContent":["import axios from 'axios';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst SECRET_KEY_TOKEN = 'React-js2105';\r\n// key nay ben back end quy dinh\r\n// ho se cung cap ben phia frontend\r\n// key nay can phai bao mat\r\nconst GetdataSearchMovies = async (keyword, page = 1) => {\r\n\tconst url = `https://api.themoviedb.org/3/search/movie?query=${keyword}&api_key=cfe422613b250f702980a3bbf9e90716&page=${page}`;\r\n\tconst response = await axios.get(url);\r\n\tconst result = response.status === 200 ? response.data : {};\r\n\treturn result;\r\n};\r\nconst getdataByIdMovies = async (id = 1) => {\r\n\tconst url = `https://api.themoviedb.org/3/movie/${id}?api_key=0aecc06bb4fadb06b5f071fef0c2ce6d&language=en-US&append_to_response=videos,images&include_image_language=en,null`;\r\n\tconst response = await axios.get(url);\r\n\tconst result = response.status === 200 ? response.data : {};\r\n\treturn result;\r\n};\r\nconst CheckLoginUser = (user, pass) => {\r\n\t// khi ma user gui username va password len server(backend api)\r\n\t// backend api se kiem tra xem account co ton tai khong\r\n\t// backend se tra ve thong tin cua user do duoi dang ma hoa token\r\n\t// client front-end se nhan duoc token do - giai ma ra de de duoc cac thong tin nguoi dung\r\n\t// giua backend va frontend can co de ma hoa va giai ma chung\r\n\t// su dung demo test web token\r\n\tlet token = null;\r\n\tif (user === 'admin' && pass == '123') {\r\n\t\ttoken = jwt.sign(\r\n\t\t\t{\r\n\t\t\t\tid: 1,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tfullname: 'Nguyen Xuan Phat',\r\n\t\t\t\temail: 'phatnx2000@gmail.com',\r\n\t\t\t\tphone: '0937001189',\r\n\t\t\t\taddress: 'Nguyen Van Linh'\r\n\t\t\t},\r\n\t\t\tSECRET_KEY_TOKEN\r\n\t\t);\r\n\t}\r\n\treturn token;\r\n};\r\n\r\nfunction getTokenStorage() {\r\n\tlet token = window.localStorage.get('token_login');\r\n\treturn token;\r\n}\r\nfunction decryptToken() {\r\n\tlet encrypToken = getTokenStorage();\r\n\tlet decoded = jwt.verify(encrypToken, SECRET_KEY_TOKEN);\r\n\treturn decoded;\r\n}\r\nfunction getEmailUser() {\r\n\tconst infoUser = decryptToken();\r\n\tif (infoUser.hasOwnProperty('email')) {\r\n\t\treturn infoUser.email;\r\n\t} else return null;\r\n}\r\nexport const api = {\r\n\tGetdataSearchMovies,\r\n\tgetdataByIdMovies,\r\n\tCheckLoginUser,\r\n\tgetEmailUser\r\n};\r\n"]},"metadata":{},"sourceType":"module"}
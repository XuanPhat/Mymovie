{"ast":null,"code":"module.exports = ProtoList;\n\nfunction setProto(obj, proto) {\n  if (typeof Object.setPrototypeOf === \"function\") return Object.setPrototypeOf(obj, proto);else obj.__proto__ = proto;\n}\n\nfunction ProtoList() {\n  this.list = [];\n  var root = null;\n  Object.defineProperty(this, 'root', {\n    get: function () {\n      return root;\n    },\n    set: function (r) {\n      root = r;\n\n      if (this.list.length) {\n        setProto(this.list[this.list.length - 1], r);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nProtoList.prototype = {\n  get length() {\n    return this.list.length;\n  },\n\n  get keys() {\n    var k = [];\n\n    for (var i in this.list[0]) k.push(i);\n\n    return k;\n  },\n\n  get snapshot() {\n    var o = {};\n    this.keys.forEach(function (k) {\n      o[k] = this.get(k);\n    }, this);\n    return o;\n  },\n\n  get store() {\n    return this.list[0];\n  },\n\n  push: function (obj) {\n    if (typeof obj !== \"object\") obj = {\n      valueOf: obj\n    };\n\n    if (this.list.length >= 1) {\n      setProto(this.list[this.list.length - 1], obj);\n    }\n\n    setProto(obj, this.root);\n    return this.list.push(obj);\n  },\n  pop: function () {\n    if (this.list.length >= 2) {\n      setProto(this.list[this.list.length - 2], this.root);\n    }\n\n    return this.list.pop();\n  },\n  unshift: function (obj) {\n    setProto(obj, this.list[0] || this.root);\n    return this.list.unshift(obj);\n  },\n  shift: function () {\n    if (this.list.length === 1) {\n      setProto(this.list[0], this.root);\n    }\n\n    return this.list.shift();\n  },\n  get: function (key) {\n    return this.list[0][key];\n  },\n  set: function (key, val, save) {\n    if (!this.length) this.push({});\n    if (save && this.list[0].hasOwnProperty(key)) this.push({});\n    return this.list[0][key] = val;\n  },\n  forEach: function (fn, thisp) {\n    for (var key in this.list[0]) fn.call(thisp, key, this.list[0][key]);\n  },\n  slice: function () {\n    return this.list.slice.apply(this.list, arguments);\n  },\n  splice: function () {\n    // handle injections\n    var ret = this.list.splice.apply(this.list, arguments);\n\n    for (var i = 0, l = this.list.length; i < l; i++) {\n      setProto(this.list[i], this.list[i + 1] || this.root);\n    }\n\n    return ret;\n  }\n};","map":{"version":3,"sources":["D:/node_modules/npm/node_modules/proto-list/proto-list.js"],"names":["module","exports","ProtoList","setProto","obj","proto","Object","setPrototypeOf","__proto__","list","root","defineProperty","get","set","r","length","enumerable","configurable","prototype","keys","k","i","push","snapshot","o","forEach","store","valueOf","pop","unshift","shift","key","val","save","hasOwnProperty","fn","thisp","call","slice","apply","arguments","splice","ret","l"],"mappings":"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","sourcesContent":["\r\nmodule.exports = ProtoList\r\n\r\nfunction setProto(obj, proto) {\r\n  if (typeof Object.setPrototypeOf === \"function\")\r\n    return Object.setPrototypeOf(obj, proto)\r\n  else\r\n    obj.__proto__ = proto\r\n}\r\n\r\nfunction ProtoList () {\r\n  this.list = []\r\n  var root = null\r\n  Object.defineProperty(this, 'root', {\r\n    get: function () { return root },\r\n    set: function (r) {\r\n      root = r\r\n      if (this.list.length) {\r\n        setProto(this.list[this.list.length - 1], r)\r\n      }\r\n    },\r\n    enumerable: true,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nProtoList.prototype =\r\n  { get length () { return this.list.length }\r\n  , get keys () {\r\n      var k = []\r\n      for (var i in this.list[0]) k.push(i)\r\n      return k\r\n    }\r\n  , get snapshot () {\r\n      var o = {}\r\n      this.keys.forEach(function (k) { o[k] = this.get(k) }, this)\r\n      return o\r\n    }\r\n  , get store () {\r\n      return this.list[0]\r\n    }\r\n  , push : function (obj) {\r\n      if (typeof obj !== \"object\") obj = {valueOf:obj}\r\n      if (this.list.length >= 1) {\r\n        setProto(this.list[this.list.length - 1], obj)\r\n      }\r\n      setProto(obj, this.root)\r\n      return this.list.push(obj)\r\n    }\r\n  , pop : function () {\r\n      if (this.list.length >= 2) {\r\n        setProto(this.list[this.list.length - 2], this.root)\r\n      }\r\n      return this.list.pop()\r\n    }\r\n  , unshift : function (obj) {\r\n      setProto(obj, this.list[0] || this.root)\r\n      return this.list.unshift(obj)\r\n    }\r\n  , shift : function () {\r\n      if (this.list.length === 1) {\r\n        setProto(this.list[0], this.root)\r\n      }\r\n      return this.list.shift()\r\n    }\r\n  , get : function (key) {\r\n      return this.list[0][key]\r\n    }\r\n  , set : function (key, val, save) {\r\n      if (!this.length) this.push({})\r\n      if (save && this.list[0].hasOwnProperty(key)) this.push({})\r\n      return this.list[0][key] = val\r\n    }\r\n  , forEach : function (fn, thisp) {\r\n      for (var key in this.list[0]) fn.call(thisp, key, this.list[0][key])\r\n    }\r\n  , slice : function () {\r\n      return this.list.slice.apply(this.list, arguments)\r\n    }\r\n  , splice : function () {\r\n      // handle injections\r\n      var ret = this.list.splice.apply(this.list, arguments)\r\n      for (var i = 0, l = this.list.length; i < l; i++) {\r\n        setProto(this.list[i], this.list[i + 1] || this.root)\r\n      }\r\n      return ret\r\n    }\r\n  }\r\n"]},"metadata":{},"sourceType":"script"}
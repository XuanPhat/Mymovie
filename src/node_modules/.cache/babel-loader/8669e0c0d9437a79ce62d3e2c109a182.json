{"ast":null,"code":"#!/usr/bin/env node\n;\n\n(function () {\n  // wrapper in case we're in module_context mode\n  // windows: running \"npm blah\" in this folder will invoke WSH, not node.\n\n  /* global WScript */\n  if (typeof WScript !== 'undefined') {\n    WScript.echo('npm does not work when run\\n' + 'with the Windows Scripting Host\\n\\n' + \"'cd' to a different directory,\\n\" + \"or type 'npm.cmd <args>',\\n\" + \"or type 'node npm <args>'.\");\n    WScript.quit(1);\n    return;\n  }\n\n  process.title = 'npm';\n\n  var unsupported = require('../lib/utils/unsupported.js');\n\n  unsupported.checkForBrokenNode();\n\n  var log = require('npmlog');\n\n  log.pause(); // will be unpaused when config is loaded.\n\n  log.info('it worked if it ends with', 'ok');\n  unsupported.checkForUnsupportedNode();\n\n  var npm = require('../lib/npm.js');\n\n  var npmconf = require('../lib/config/core.js');\n\n  var errorHandler = require('../lib/utils/error-handler.js');\n\n  var configDefs = npmconf.defs;\n  var shorthands = configDefs.shorthands;\n  var types = configDefs.types;\n\n  var nopt = require('nopt'); // if npm is called as \"npmg\" or \"npm_g\", then\n  // run in global mode.\n\n\n  if (process.argv[1][process.argv[1].length - 1] === 'g') {\n    process.argv.splice(1, 1, 'npm', '-g');\n  }\n\n  log.verbose('cli', process.argv);\n  var conf = nopt(types, shorthands);\n  npm.argv = conf.argv.remain;\n  if (npm.deref(npm.argv[0])) npm.command = npm.argv.shift();else conf.usage = true;\n\n  if (conf.version) {\n    console.log(npm.version);\n    return errorHandler.exit(0);\n  }\n\n  if (conf.versions) {\n    npm.command = 'version';\n    conf.usage = false;\n    npm.argv = [];\n  }\n\n  log.info('using', 'npm@%s', npm.version);\n  log.info('using', 'node@%s', process.version);\n  process.on('uncaughtException', errorHandler);\n  process.on('unhandledRejection', errorHandler);\n\n  if (conf.usage && npm.command !== 'help') {\n    npm.argv.unshift(npm.command);\n    npm.command = 'help';\n  }\n\n  var isGlobalNpmUpdate = conf.global && ['install', 'update'].includes(npm.command) && npm.argv.includes('npm'); // now actually fire up npm and run the command.\n  // this is how to use npm programmatically:\n\n  conf._exit = true;\n  npm.load(conf, function (er) {\n    if (er) return errorHandler(er);\n\n    if (!isGlobalNpmUpdate && npm.config.get('update-notifier') && !unsupported.checkVersion(process.version).unsupported) {\n      const pkg = require('../package.json');\n\n      let notifier = require('update-notifier')({\n        pkg\n      });\n\n      const isCI = require('ci-info').isCI;\n\n      if (notifier.update && notifier.update.latest !== pkg.version && !isCI) {\n        const color = require('ansicolors');\n\n        const useColor = npm.config.get('color');\n        const useUnicode = npm.config.get('unicode');\n        const old = notifier.update.current;\n        const latest = notifier.update.latest;\n        let type = notifier.update.type;\n\n        if (useColor) {\n          switch (type) {\n            case 'major':\n              type = color.red(type);\n              break;\n\n            case 'minor':\n              type = color.yellow(type);\n              break;\n\n            case 'patch':\n              type = color.green(type);\n              break;\n          }\n        }\n\n        const changelog = `https://github.com/npm/cli/releases/tag/v${latest}`;\n        notifier.notify({\n          message: `New ${type} version of ${pkg.name} available! ${useColor ? color.red(old) : old} ${useUnicode ? 'â†’' : '->'} ${useColor ? color.green(latest) : latest}\\n` + `${useColor ? color.yellow('Changelog:') : 'Changelog:'} ${useColor ? color.cyan(changelog) : changelog}\\n` + `Run ${useColor ? color.green(`npm install -g ${pkg.name}`) : `npm i -g ${pkg.name}`} to update!`\n        });\n      }\n    }\n\n    npm.commands[npm.command](npm.argv, function (err) {\n      // https://genius.com/Lin-manuel-miranda-your-obedient-servant-lyrics\n      if (!err && npm.config.get('ham-it-up') && !npm.config.get('json') && !npm.config.get('parseable') && npm.command !== 'completion') {\n        console.error(`\\n ${npm.config.get('unicode') ? 'ðŸŽµ ' : ''} I Have the Honour to Be Your Obedient Servant,${npm.config.get('unicode') ? 'ðŸŽµ ' : ''} ~ npm ${npm.config.get('unicode') ? 'ðŸ“œðŸ–‹ ' : ''}\\n`);\n      }\n\n      errorHandler.apply(this, arguments);\n    });\n  });\n})();","map":{"version":3,"sources":["D:/node_modules/npm/bin/npm-cli.js"],"names":["WScript","echo","quit","process","title","unsupported","require","checkForBrokenNode","log","pause","info","checkForUnsupportedNode","npm","npmconf","errorHandler","configDefs","defs","shorthands","types","nopt","argv","length","splice","verbose","conf","remain","deref","command","shift","usage","version","console","exit","versions","on","unshift","isGlobalNpmUpdate","global","includes","_exit","load","er","config","get","checkVersion","pkg","notifier","isCI","update","latest","color","useColor","useUnicode","old","current","type","red","yellow","green","changelog","notify","message","name","cyan","commands","err","error","apply","arguments"],"mappings":"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","sourcesContent":["#!/usr/bin/env node\r\n;(function () { // wrapper in case we're in module_context mode\r\n  // windows: running \"npm blah\" in this folder will invoke WSH, not node.\r\n  /* global WScript */\r\n  if (typeof WScript !== 'undefined') {\r\n    WScript.echo(\r\n      'npm does not work when run\\n' +\r\n        'with the Windows Scripting Host\\n\\n' +\r\n        \"'cd' to a different directory,\\n\" +\r\n        \"or type 'npm.cmd <args>',\\n\" +\r\n        \"or type 'node npm <args>'.\"\r\n    )\r\n    WScript.quit(1)\r\n    return\r\n  }\r\n\r\n  process.title = 'npm'\r\n\r\n  var unsupported = require('../lib/utils/unsupported.js')\r\n  unsupported.checkForBrokenNode()\r\n\r\n  var log = require('npmlog')\r\n  log.pause() // will be unpaused when config is loaded.\r\n  log.info('it worked if it ends with', 'ok')\r\n\r\n  unsupported.checkForUnsupportedNode()\r\n\r\n  var npm = require('../lib/npm.js')\r\n  var npmconf = require('../lib/config/core.js')\r\n  var errorHandler = require('../lib/utils/error-handler.js')\r\n\r\n  var configDefs = npmconf.defs\r\n  var shorthands = configDefs.shorthands\r\n  var types = configDefs.types\r\n  var nopt = require('nopt')\r\n\r\n  // if npm is called as \"npmg\" or \"npm_g\", then\r\n  // run in global mode.\r\n  if (process.argv[1][process.argv[1].length - 1] === 'g') {\r\n    process.argv.splice(1, 1, 'npm', '-g')\r\n  }\r\n\r\n  log.verbose('cli', process.argv)\r\n\r\n  var conf = nopt(types, shorthands)\r\n  npm.argv = conf.argv.remain\r\n  if (npm.deref(npm.argv[0])) npm.command = npm.argv.shift()\r\n  else conf.usage = true\r\n\r\n  if (conf.version) {\r\n    console.log(npm.version)\r\n    return errorHandler.exit(0)\r\n  }\r\n\r\n  if (conf.versions) {\r\n    npm.command = 'version'\r\n    conf.usage = false\r\n    npm.argv = []\r\n  }\r\n\r\n  log.info('using', 'npm@%s', npm.version)\r\n  log.info('using', 'node@%s', process.version)\r\n\r\n  process.on('uncaughtException', errorHandler)\r\n  process.on('unhandledRejection', errorHandler)\r\n\r\n  if (conf.usage && npm.command !== 'help') {\r\n    npm.argv.unshift(npm.command)\r\n    npm.command = 'help'\r\n  }\r\n\r\n  var isGlobalNpmUpdate = conf.global && ['install', 'update'].includes(npm.command) && npm.argv.includes('npm')\r\n\r\n  // now actually fire up npm and run the command.\r\n  // this is how to use npm programmatically:\r\n  conf._exit = true\r\n  npm.load(conf, function (er) {\r\n    if (er) return errorHandler(er)\r\n    if (\r\n      !isGlobalNpmUpdate &&\r\n      npm.config.get('update-notifier') &&\r\n      !unsupported.checkVersion(process.version).unsupported\r\n    ) {\r\n      const pkg = require('../package.json')\r\n      let notifier = require('update-notifier')({pkg})\r\n      const isCI = require('ci-info').isCI\r\n      if (\r\n        notifier.update &&\r\n        notifier.update.latest !== pkg.version &&\r\n        !isCI\r\n      ) {\r\n        const color = require('ansicolors')\r\n        const useColor = npm.config.get('color')\r\n        const useUnicode = npm.config.get('unicode')\r\n        const old = notifier.update.current\r\n        const latest = notifier.update.latest\r\n        let type = notifier.update.type\r\n        if (useColor) {\r\n          switch (type) {\r\n            case 'major':\r\n              type = color.red(type)\r\n              break\r\n            case 'minor':\r\n              type = color.yellow(type)\r\n              break\r\n            case 'patch':\r\n              type = color.green(type)\r\n              break\r\n          }\r\n        }\r\n        const changelog = `https://github.com/npm/cli/releases/tag/v${latest}`\r\n        notifier.notify({\r\n          message: `New ${type} version of ${pkg.name} available! ${\r\n            useColor ? color.red(old) : old\r\n          } ${useUnicode ? 'â†’' : '->'} ${\r\n            useColor ? color.green(latest) : latest\r\n          }\\n` +\r\n          `${\r\n            useColor ? color.yellow('Changelog:') : 'Changelog:'\r\n          } ${\r\n            useColor ? color.cyan(changelog) : changelog\r\n          }\\n` +\r\n          `Run ${\r\n            useColor\r\n              ? color.green(`npm install -g ${pkg.name}`)\r\n              : `npm i -g ${pkg.name}`\r\n          } to update!`\r\n        })\r\n      }\r\n    }\r\n    npm.commands[npm.command](npm.argv, function (err) {\r\n      // https://genius.com/Lin-manuel-miranda-your-obedient-servant-lyrics\r\n      if (\r\n        !err &&\r\n        npm.config.get('ham-it-up') &&\r\n        !npm.config.get('json') &&\r\n        !npm.config.get('parseable') &&\r\n        npm.command !== 'completion'\r\n      ) {\r\n        console.error(\r\n          `\\n ${\r\n            npm.config.get('unicode') ? 'ðŸŽµ ' : ''\r\n          } I Have the Honour to Be Your Obedient Servant,${\r\n            npm.config.get('unicode') ? 'ðŸŽµ ' : ''\r\n          } ~ npm ${\r\n            npm.config.get('unicode') ? 'ðŸ“œðŸ–‹ ' : ''\r\n          }\\n`\r\n        )\r\n      }\r\n      errorHandler.apply(this, arguments)\r\n    })\r\n  })\r\n})()\r\n"]},"metadata":{},"sourceType":"script"}
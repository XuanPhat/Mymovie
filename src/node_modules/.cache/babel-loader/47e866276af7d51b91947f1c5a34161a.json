{"ast":null,"code":"module.exports = loadCAFile;\n\nvar fs = require('fs');\n\nfunction loadCAFile(cafilePath, cb) {\n  if (!cafilePath) return process.nextTick(cb);\n  fs.readFile(cafilePath, 'utf8', afterCARead.bind(this));\n\n  function afterCARead(er, cadata) {\n    if (er) {\n      // previous cafile no longer exists, so just continue on gracefully\n      if (er.code === 'ENOENT') return cb();\n      return cb(er);\n    }\n\n    var delim = '-----END CERTIFICATE-----';\n    var output;\n    output = cadata.split(delim).filter(function (xs) {\n      return !!xs.trim();\n    }).map(function (xs) {\n      return xs.trimLeft() + delim;\n    });\n    this.set('ca', output);\n    cb(null);\n  }\n}","map":{"version":3,"sources":["D:/node_modules/npm/lib/config/load-cafile.js"],"names":["module","exports","loadCAFile","fs","require","cafilePath","cb","process","nextTick","readFile","afterCARead","bind","er","cadata","code","delim","output","split","filter","xs","trim","map","trimLeft","set"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiBC,UAAjB;;AAEA,IAAIC,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AAEA,SAASF,UAAT,CAAqBG,UAArB,EAAiCC,EAAjC,EAAqC;AACnC,MAAI,CAACD,UAAL,EAAiB,OAAOE,OAAO,CAACC,QAAR,CAAiBF,EAAjB,CAAP;AAEjBH,EAAAA,EAAE,CAACM,QAAH,CAAYJ,UAAZ,EAAwB,MAAxB,EAAgCK,WAAW,CAACC,IAAZ,CAAiB,IAAjB,CAAhC;;AAEA,WAASD,WAAT,CAAsBE,EAAtB,EAA0BC,MAA1B,EAAkC;AAChC,QAAID,EAAJ,EAAQ;AACN;AACA,UAAIA,EAAE,CAACE,IAAH,KAAY,QAAhB,EAA0B,OAAOR,EAAE,EAAT;AAC1B,aAAOA,EAAE,CAACM,EAAD,CAAT;AACD;;AAED,QAAIG,KAAK,GAAG,2BAAZ;AACA,QAAIC,MAAJ;AAEAA,IAAAA,MAAM,GAAGH,MAAM,CACZI,KADM,CACAF,KADA,EAENG,MAFM,CAEC,UAAUC,EAAV,EAAc;AACpB,aAAO,CAAC,CAACA,EAAE,CAACC,IAAH,EAAT;AACD,KAJM,EAKNC,GALM,CAKF,UAAUF,EAAV,EAAc;AACjB,aAAOA,EAAE,CAACG,QAAH,KAAgBP,KAAvB;AACD,KAPM,CAAT;AASA,SAAKQ,GAAL,CAAS,IAAT,EAAeP,MAAf;AACAV,IAAAA,EAAE,CAAC,IAAD,CAAF;AACD;AACF","sourcesContent":["module.exports = loadCAFile\r\n\r\nvar fs = require('fs')\r\n\r\nfunction loadCAFile (cafilePath, cb) {\r\n  if (!cafilePath) return process.nextTick(cb)\r\n\r\n  fs.readFile(cafilePath, 'utf8', afterCARead.bind(this))\r\n\r\n  function afterCARead (er, cadata) {\r\n    if (er) {\r\n      // previous cafile no longer exists, so just continue on gracefully\r\n      if (er.code === 'ENOENT') return cb()\r\n      return cb(er)\r\n    }\r\n\r\n    var delim = '-----END CERTIFICATE-----'\r\n    var output\r\n\r\n    output = cadata\r\n      .split(delim)\r\n      .filter(function (xs) {\r\n        return !!xs.trim()\r\n      })\r\n      .map(function (xs) {\r\n        return xs.trimLeft() + delim\r\n      })\r\n\r\n    this.set('ca', output)\r\n    cb(null)\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script"}